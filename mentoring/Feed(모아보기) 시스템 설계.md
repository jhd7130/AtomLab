<img width="792" alt="image" src="https://user-images.githubusercontent.com/78134917/170691797-8fc58839-0441-4337-a59a-7217ae3edfe3.png">

**요구사항**   

모아보기라는 기능을 리뉴얼 해야합니다. 내가 구독중인 모든 유저의 글을 시간순으로 정렬해서 볼수 있어야해요. 어떻게 시스템을 구성 하시겠습니까?

**규모**  
내가 구독하고 있는 유저가 10만명
하루에 글이 천만개씩 올라온다.

**테이블**   
![image](https://user-images.githubusercontent.com/78134917/170660182-d6286835-04b9-41be-805f-9fbd8c548804.png)


- 각각에 피드에 푸쉬하는 방식은 인서트 이벤트가 많이 발생하기 때문에 내가 구독하고 있는 구독자들의 게시물id를 캐시에 저장해 놓고 사용자의 모아보기 피드가 첫 로딩되거나 재로딩될때 해당 캐시의 게시물id를 사용해서 게시물 상세정보를 조회하여 모아보기 피드를 완성하여 반환해줍니다.   
- 많은 사용자의 게시물을 하나의 테이블에서 관리하기는 힘들다고 생각했습니다. 따라서 테이블을 하나의 캐시에 캐싱할 수 있게 파티셔닝을 고려해보았습니다. 아이디의 첫 알파벳을 기준으로 나누어 데이터를 서로 다른 db에 분산시킵니다.( a ~ b : server A , c ~ f : server B) 
- 많은 데이터를 조회할때 조금 더 빠른 조회와 디스크에 접근할 때 생기는 io부하를 줄이기 위해 캐시를 적극 활용하였습니다.
